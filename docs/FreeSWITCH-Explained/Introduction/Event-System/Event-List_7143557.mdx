# 活动列表

---

点击此处展开目录

* [0\. 关于](#0-about)
* [1\. 通道事件](#1-channel-events)  
   * [1.1 CHANNEL\_CALLSTATE 事件](#11-channel_callstate-event)  
   * [1.2 CHANNEL\_CREATE 事件](#12-channel_create-event)  
   * [1.3 CHANNEL\_DESTROY 事件](#13-channel_destroy-event)  
   * [1.4 CHANNEL\_STATE 事件](#14-channel_state-event)  
   * [1.5 CHANNEL\_ANSWER 事件](#15-channel_answer-event)  
   * [1.6 CHANNEL\_HANGUP 事件](#16-channel_hangup-event)  
   * [1.7 CHANNEL\_HANGUP\_COMPLETE 事件](#17-channel_hangup_complete-event)  
   * [1.8 CHANNEL\_EXECUTE 事件](#18-channel_execute-event)  
   * [1.9 CHANNEL\_EXECUTE\_COMPLETE 事件](#19-channel_execute_complete-event)  
   * [1.10 CHANNEL\_BRIDGE 事件](#110-channel_bridge-event)  
   * [1.11 CHANNEL\_UNBRIDGE 事件](#111-channel_unbridge-event)  
   * [1.12 CHANNEL\_PROGRESS 事件](#112-channel_progress-event)  
   * [1.13 CHANNEL\_PROGRESS\_MEDIA 事件](#113-channel_progress_media-event)  
   * [1.14 CHANNEL\_OUTGOING 事件](#114-channel_outgoing-event)  
   * [1.15 CHANNEL\_PARK 事件](#115-channel_park-event)  
   * [1.16 CHANNEL\_UNPARK 事件](#116-channel_unpark-event)  
   * [1.17 CHANNEL\_APPLICATION 事件](#117-channel_application-event)  
   * [1.18 CHANNEL\_HOLD 事件](#118-channel_hold-event)  
   * [1.19 CHANNEL\_UNHOLD 事件](#119-channel_unhold-event)  
   * [1.20 CHANNEL\_ORIGINATE 事件](#120-channel_originate-event)  
   * [1.21 CHANNEL\_UUID 事件](#121-channel_uuid-event)
* [2\. 系统事件](#2-system-events)  
   * [SHUTDOWN](#shutdown)  
   * [MODULE\_LOAD](#module_load)  
   * [MODULE\_UNLOAD](#module_unload)  
   * [RELOADXML](#reloadxml)  
   * [NOTIFY](#notify)  
   * [SEND\_MESSAGE](#send_message)  
   * [RECV\_MESSAGE](#recv_message)  
   * [REQUEST\_PARAMS](#request_params)  
   * [CHANNEL\_DATA](#channel_data)  
   * [GENERAL](#general)  
   * [COMMAND](#command)  
   * [SESSION\_HEARTBEAT](#session_heartbeat)  
   * [CLIENT\_DISCONNECTED](#client_disconnected)  
   * [SERVER\_DISCONNECTED](#server_disconnected)  
   * [SEND\_INFO](#send_info)  
   * [RECV\_INFO](#recv_info)  
   * [CALL\_SECURE](#call_secure)  
   * [NAT](#nat)  
   * [RECORD\_START](#record_start)  
   * [RECORD\_STOP](#record_stop)  
   * [PLAYBACK\_START](#playback_start)  
   * [PLAYBACK\_STOP](#playback_stop)  
   * [CALL\_UPDATE](#call_update)
* [3\. 其他事件](#3-other-events)  
   * [API](#api)  
   * [BACKGROUND\_JOB](#background_job)  
   * [CUSTOM](#custom)  
   * [RE\_SCHEDULE](#del_schedule)  
   * [HEARTBEAT](#heartbeat)  
   * [DETECTED\_TONE](#detected_tone)  
   * [ALL](#all)
* [6\. 未记录事件](#6-undocumented-events)  
   * [LOG](#log)  
   * [INBOUND\_CHAN](#inbound_chan)  
   * [OUTBOUND\_CHAN](#outbound_chan)  
   * [STARTUP](#startup)  
   * [PUBLISH](#publish)  
   * [UNPUBLISH](#unpublish)  
   * [TALK](#talk)  
   * [NOTALK](#notalk)  
   * [SESSION\_CRASH](#session_crash)  
   * [DTMF](#dtmf)  
   * [MESSAGE](#send_message)  
   * [PRESENCE\_IN](#presence_in)  
   * [PRESENCE\_OUT](#presence_out)  
   * [PRESENCE\_PROBE](#presence_probe)  
   * [MESSAGE\_WAITING](#message_waiting)  
   * [MESSAGE\_QUERY](#message_query)  
   * [ROSTER](#roster)  
   * [RECV\_RTCP\_MESSAGE](#recv_rtcp_message)  
   * [CODEC](#codec)  
   * [DETECTED\_SPEECH](#detected_speech)  
   * [PRIVATE\_COMMAND](#private_command)  
   * [TRAP](#trap)  
   * [ADD\_SCHEDULE](#add_schedule)  
   * [DEL\_SCHEDULE](#del_schedule)  
   * [EXE\_SCHEDULE](#del_schedule)

## 0. 关于

所有可以由FreeSWITCH的[事件系统](./Events_32178330.mdx#0-about)处理的[事件](./index.mdx#0-about)。

最新的事件列表可以在[src/switch\_event.c](https://github.com/signalwire/freeswitch/blob/master/src/switch%5Fevent.c)中找到，它包含在一个名为`EVENT_NAMES`的字符数组中。

## 1. 通道事件

通道事件是用于监视呼入分机的呼叫以及呼叫当前状态的事件类型/类别。

通道事件可以携带用于传输呼叫的协议（例如SIP）的附加信息。这些信息可以安全地忽略，您不必使用它们来跟踪呼叫。

通道事件发送的最少信息（以及**0.1 最少事件信息**中的标头）如下所示：

```xml
Channel-State: CS_NEW
Channel-State-Number: 0
Channel-Name: sofia/192.168.0.58/jonas%40192.168.0.58%3A5060
```

通道状态

通道可能处于的状态。通道事件会发送**`Channel-State`**和**`Channel-State-Number`**以指示当前状态。

有关完整列表，请参阅[通道状态](../../Dialplan/Channel-States_7144639.mdx#0-about)。

### 1.1 `CHANNEL_CALLSTATE`事件

待办事项

`CHANNEL_CALLSTATE`和`CHANNEL_STATE`有什么区别？（点击展开）

通道状态和`CHANNEL_*STATE`事件之间似乎存在一种对应关系。例如，只在通道状态为`RINGING`和`HANGUP`时看到`CHANNEL_CALLSTATE`事件，而其他状态下看到的是`CHANNEL_STATE`事件。

同样在邮件列表线程中得到证实：<https://lists.freeswitch.org/pipermail/freeswitch-users/2012-February/080189.html>，答案可能在[switch\_core\_state\_machine.c](https://github.com/signalwire/freeswitch/blob/master/src/switch%5Fcore%5Fstate%5Fmachine.c)中。

[创建一个新端点：会话的生命周期](../../Community/Contributing-Code/Creating-New-Modules/9634354.mdx#0-about)页面还介绍了FreeSWITCH状态机。

**David Artuñedo Guillén** [David at jajah.com](mailto:freeswitch-users%40lists.freeswitch.org?Subject=[Freeswitch-users] FreeSwitch 通道状态和呼叫状态的状态机实现&In-Reply-To= "[Freeswitch-users] FreeSwitch 通道状态和呼叫状态的状态机实现")  
_2012年2月7日 星期二 12:05:13 MSK_

---

嗨，

我是FreeSwitch的新手。我正在研究使用mod_event_socket接口编写一些简单的呼叫控制应用。我感兴趣的事件是通道状态和呼叫状态，以便了解呼叫的状态和进展情况。我没有找到任何描述通道和呼叫状态机的文档。我也查看了源代码，但没有找到状态机的实现位置。

有人知道我可以在哪里找到这些信息吗？

例如，通过FS设置一些呼叫时，以下是与关联的UUID一起收到的事件：

bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_INIT
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_CALLSTATE RINGING
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_ROUTING
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_CONSUME_MEDIA
9a66eaf9-e11e-4f9c-9623-19deac73fc2e CHANNEL_CALLSTATE ACTIVE
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_CALLSTATE EARLY
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_CALLSTATE ACTIVE
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_EXECUTE
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_HIBERNATE
9a66eaf9-e11e-4f9c-9623-19deac73fc2e CHANNEL_STATE CS_HIBERNATE
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_RESET
9a66eaf9-e11e-4f9c-9623-19deac73fc2e CHANNEL_STATE CS_RESET
9a66eaf9-e11e-4f9c-9623-19deac73fc2e CHANNEL_STATE CS_SOFT_EXECUTE
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_SOFT_EXECUTE
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_CONSUME_MEDIA
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_EXCHANGE_MEDIA
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_CALLSTATE HANGUP
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_HANGUP
9a66eaf9-e11e-4f9c-9623-19deac73fc2e CHANNEL_STATE CS_PARK
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_REPORTING
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_CALLSTATE DOWN
bbac39e0-9025-4969-a6ba-b49c89b12237 CHANNEL_STATE CS_DESTROY

提前感谢。

David

回复:

> **João Mesquita** [jmesquita at freeswitch.org](mailto:freeswitch-users%40lists.freeswitch.org?Subject=[Freeswitch-users] FreeSwitch 状态机对于 CHANNEL_STATE 和 CHANNEL_CALLSTATE 的说明 "[Freeswitch-users] FreeSwitch 状态机对于 CHANNEL_STATE 和 CHANNEL_CALLSTATE 的说明")  
> _2012年2月7日 星期二 19:47:32 MSK_
> 
> ---
> 
> 我希望能将这个状态机的文档化。很不幸，真正了解它如何工作的人非常少，而且他们中大多数都忙于编写 freeswitch 的核心代码。 
> 
> 我不知道是否有一天会有人接受这个挑战并将其文档化，这将帮助很多并非核心开发人员理解 freeswitch 内部的工作原理。 
> 
> 致敬，
> --  
> João Mesquita

关于 CHANNEL_CALLSTATE 和 CHANNEL_STATE 事件之间的关系，以及 Channel-State 和 Channel-Call-State 标头的关联是什么？（点击展开）

空行表示不同事件之间的边界。通过使用 `/"Channel-State"\|"Channel-Call-State"\|^$\|CHANNEL_CALLSTATE\|CHANNEL_STATE` 命令，通过 Vim 过滤了通过测试呼叫（仅由分机路由，未接听），并生成了相应的事件。

[呼叫的生命周期](../Life-Cycle-of-a-Call_1048888.mdx#0-about)中的 UML 图以及下面的转储应该对解读此内容有所帮助。请参考 [附件](/attachments/7143557/32178221.html)，其中有一个 `CHANNEL_STATE` 事件的差异，一个处于 `CS_ROUTING` 状态，另一个处于 `CS_EXECUTE` 状态（几乎没有什么差异）。

还请查看 [创建新端点：会话的生命周期](../../Community/Contributing-Code/Creating-New-Modules/9634354.mdx#0-about) 页面！

```erl
{"Channel-State","CS_NEW"},

{"Channel-State","CS_INIT"},

{"Channel-Call-State","DOWN"},
{"Channel-State","CS_NEW"},
{"Event-Name","CHANNEL_STATE"},

{"Channel-Call-State","DOWN"},
{"Channel-State","CS_INIT"},
{"Event-Name","CHANNEL_STATE"},


{"Channel-Call-State","DOWN"},
{"Channel-State","CS_INIT"},
{"Event-Name","CHANNEL_CREATE"},

{"Channel-Call-State","RINGING"},
{"Channel-State","CS_ROUTING"},
{"Event-Name","CHANNEL_CALLSTATE"},

{"Channel-Call-State","RINGING"},
{"Channel-State","CS_ROUTING"},
{"Event-Name","CHANNEL_STATE"},

{"Channel-Call-State","RINGING"},
{"Channel-State","CS_EXECUTE"},
{"Event-Name","CHANNEL_STATE"},

{"Channel-Call-State","RINGING"},
{"Channel-State","CS_EXECUTE"},
{"Event-Name","CHANNEL_EXECUTE"},

{"Channel-Call-State","RINGING"},
{"Channel-State","CS_EXECUTE"},
{"Event-Name","CHANNEL_EXECUTE_COMPLETE"},

{"Channel-Call-State","RINGING"},
{"Channel-State","CS_ROUTING"},
{"Event-Name","CHANNEL_STATE"},

{"Channel-Call-State","RINGING"},
{"Channel-State","CS_ROUTING"},
{"Event-Name","CHANNEL_HANGUP"},

{"Channel-Call-State","RINGING"},
{"Channel-State","CS_HANGUP"},
{"Event-Name","CHANNEL_STATE"},

{"通道-通话状态","挂断"},
{"通道状态","CS_挂断"},
{"事件名称","通道通话状态"},

{"通道-通话状态","挂断"},
{"通道状态","CS_报告中"},
{"事件名称","通道状态"},

{"通道-通话状态","挂断"},
{"通道状态","CS_报告中"},
{"事件名称","通道挂断完成"},

{"通道-通话状态","挂断"},
{"通道状态","CS_报告中"},
{"事件名称","通道销毁"},

{"通道-通话状态","挂断"},
{"通道状态","CS_销毁"},
{"事件名称","通道状态"},

**通道通话状态示例** 展开源 

```text
Content-Length: 1754
Content-Type: text/event-plain

事件名称：CHANNEL_CALLSTATE
核心UUID：f852daae-6da9-4979-8dc8-fa11651a7891
FreeSWITCH主机名：test
FreeSWITCH IPv4：1.2.3.4
FreeSWITCH IPv6：%3A%3A1
本地事件日期：2010-12-21%2014%3A21%3A54
GMT事件日期：星期二，2010年12月21日13%3A21%3A54%20GMT
事件时间戳：1292937714788536
调用文件：switch_channel.c
调用功能：switch_channel_perform_set_callstate
调用行号：213
原始通道呼叫状态：挂断
通道状态：CS_DESTROY
通道呼叫状态：已结束
通道状态编号：12
通道名称：sofia/internal_et/8000%40sipdomain.de
唯一标识符：005f03fa-c803-428e-92cb-10534ac780dd
呼叫方向：呼入
出席呼叫方向：呼入
通道出席ID：8000%40sipdomain.de
应答状态：挂断
通道读取编解码器名称：G722
通道读取编解码器率：16000
通道读取编解码器比特率：64000
通道写入编解码器名称：G722
通道写入编解码器率：16000
通道写入编解码器比特率：64000
呼叫方向：呼入
呼叫方用户名：8000
呼叫方拨号计划：LUA
呼叫方呼叫者ID名称：Helmut%20Kuper
呼叫方呼叫者ID号码：8000
呼叫方网络地址：2.2.2.2
呼叫方ANI：8000
呼叫方目标号码：***6
呼叫方唯一标识符：005f03fa-c803-428e-92cb-10534ac780dd
呼叫方来源：mod_sofia
呼叫方上下文：internal.lua
呼叫方通道名称：sofia/internal_et/8000%40sipdomain.de
呼叫方配置文件索引：1
呼叫方配置文件创建时间：1292937711184483
呼叫方通道创建时间：1292937711184483
呼叫方通道应答时间：1292937711200482
呼叫方通道进展时间：0
呼叫方通道进展媒体时间：1292937711200482
呼叫方通道挂断时间：1292937714786536
呼叫方通道转移时间：0
呼叫方屏幕位：true
呼叫方隐私隐藏名称：false
呼叫方隐私隐藏号码：false

### 1.2 `CHANNEL_CREATE`事件

`CHANNEL_CREATE` 是在分机即将执行某项操作时发送的。它既可以是拨打电话，也可以是分机接到来电。

该事件没有任何额外的信息。

**`CHANNEL_CREATE` 示例** 扩展源 

```xml
Event-Name: CHANNEL_CREATE
Core-UUID: 17c1c070-8a13-11de-9ab6-91a5c9f91e77
FreeSWITCH-Hostname: jmesquita-dell
FreeSWITCH-IPv4: 186.18.21.203
FreeSWITCH-IPv6: %3A%3A1
Event-Date-Local: 2009-08-16%2000%3A26%3A08
Event-Date-GMT: Sun,%2016%20Aug%202009%2003%3A26%3A08%20GMT
Event-Date-Timestamp: 1250393168131798
Event-Calling-File: switch_channel.c
Event-Calling-Function: switch_channel_set_caller_profile
Event-Calling-Line-Number: 1428
Channel-State: CS_NEW
Channel-State-Number: 0
Channel-Name: sofia/internal/1000%40192.168.1.100
Unique-ID: 89aaa4da-8a14-11de-9ab6-91a5c9f91e77
Call-Direction: inbound
Presence-Call-Direction: inbound
Answer-State: ringing
```

### 1.3 `CHANNEL_DESTROY` 事件

当一个通道需要销毁时调用。

**`CHANNEL_DESTROY` 示例** 扩展源

```xml
读取通道编解码器名称：PCMU
读取通道编解码器速率：8000
写入通道编解码器名称：PCMU
写入通道编解码器速率：8000
呼叫方用户名：jonas
呼叫方拨号计划：XML
呼叫方呼叫者ID名称：jonas
呼叫方呼叫者ID号码：jonas
呼叫方网络地址：192.168.0.58
呼叫方目标号码：192.168.0.58/arne%25192.168.0.58
呼叫方唯一ID：f66e8e31-c9fb-9b41-a9a2-a1586facb97f
呼叫方来源：mod_sofia
呼叫方上下文：default
呼叫方通道名称：sofia/192.168.0.58/arne
呼叫方屏幕位：是
呼叫方隐私隐藏名称：否
呼叫方隐私隐藏号码：否
发起方用户名：jonas
发起方拨号计划：XML
发起方呼叫者ID名称：jonas
发起方呼叫者ID号码：jonas
发起方网络地址：192.168.0.58
发起方目标号码：541
发起方唯一ID：0dd4e4f7-36ed-a04d-a8f7-7aebb683af50
发起方来源：mod_sofia
发起方上下文：default
发起方通道名称：sofia/192.168.0.58/jonas%40192.168.0.58%3A5060
发起方屏幕位：是
发起方隐私隐藏名称：否
发起方隐私隐藏号码：否
```

### 1.4 `CHANNEL_STATE`事件

当通道切换其通话状态时发送。

此事件不包含任何附加信息。

**CHANNEL\_STATE范例** 展开源代码

```xml
内容长度: 646
内容类型: 文本/事件-明文
```

Channel-State: CS_EXECUTE
Channel-State-Number: 4
Channel-Name: sofia/default/1006%4010.0.1.250%3A5060
Unique-ID: 74775b0d-b112-46e2-95af-c28258650b1b
Call-Direction: inbound
Answer-State: ringing
Event-Name: CHANNEL_STATE
Core-UUID: 2130a7d1-c1f7-44cd-8fae-8ed5946f3cec
FreeSWITCH-Hostname: localhost.localdomain
FreeSWITCH-IPv4: 10.0.1.250
FreeSWITCH-IPv6: 127.0.0.1
Event-Date-Local: 2007-12-16%2022%3A33%3A18
Event-Date-GMT: Mon,%2017%20Dec%202007%2004%3A33%3A18%20GMT
Event-Date-timestamp: 1197865998931097
Event-Calling-File: switch_channel.c
Event-Calling-Function: switch_channel_perform_set_running_state
Event-Calling-Line-Number: 620

### 1.5 `CHANNEL_ANSWER` event

[Someone calls and answers]("[to_be_replace[expand source]]")

```xml
Answer-State:  已应答
Call-Direction:  呼出
Caller-ANI:  100
Caller-Callee-ID-Name:  Outbound%20Call
Caller-Callee-ID-Number:  1000
Caller-Caller-ID-Name:  Extension%20100
Caller-Caller-ID-Number:  100
Caller-Channel-Answered-Time:  1358091528753446
Caller-Channel-Bridged-Time:  0
Caller-Channel-Created-Time:  1358091527433428
Caller-Channel-Hangup-Time:  0
Caller-Channel-Hold-Accum:  0
Caller-Channel-Last-Hold:  0
Caller-Channel-Name:  sofia/internal/sip%3A1000%40192.168.1.11%3A5062
Caller-Channel-Progress-Media-Time:  0
Caller-Channel-Progress-Time:  1358091527433428
Caller-Channel-Resurrect-Time:  0
Caller-Channel-Transfer-Time:  0
Caller-Context:  默认
Caller-Destination-Number:  1000
Caller-Dialplan:  XML
Caller-Direction:  呼出
Caller-Network-Addr:  192.168.1.11
Caller-Privacy-Hide-Name:  false
Caller-Privacy-Hide-Number:  false
Caller-Profile-Created-Time:  1358091527433428
Caller-Profile-Index:  1
Caller-Screen-Bit:  true
Caller-Source:  mod_sofia
Caller-Unique-ID:  81273088-c31f-4469-85a6-c878e42210e5
Caller-Username:  100
Channel-Call-State:  活跃
Channel-Call-UUID:  c9bbde8b-379b-45d4-b193-3f761a44f3e2
Channel-HIT-Dialplan:  false
Channel-Name:  sofia/internal/sip%3A1000%40192.168.1.11%3A5062
Channel-Presence-ID:  1000%40192.168.1.11
Channel-Read-Codec-Bit-Rate:  64000
Channel-Read-Codec-Name:  PCMU
Channel-Read-Codec-Rate:  8000
Channel-State:  媒体处理中
Channel-State-Number:  7
Channel-Write-Codec-Bit-Rate:  64000
Channel-Write-Codec-Name:  PCMU
Channel-Write-Codec-Rate:  8000
Core-UUID:  347c8e76-2a34-423a-8199-50860933a276
Event-Calling-File:  switch_channel.c
Event-Calling-Function:  switch_channel_perform_mark_answered
Event-Calling-Line-Number:  3397
Event-Date-GMT:  星期日,%2013%20Jan%202013%2015%3A38%3A48%20GMT
Event-Date-Local:  2013-01-13%2010%3A38%3A48
Event-Date-Timestamp:  1358091528753446
Event-Name:  CHANNEL_ANSWER
Event-Sequence:  6726
FreeSWITCH-Hostname:  aztrock-home
FreeSWITCH-IPv4:  192.168.1.11
FreeSWITCH-IPv6:  %3A%3A1
FreeSWITCH-Switchname:  aztrock-home

**CHANNEL_ANSWER - 入站样例** 展开源代码

```xml
Answer-State: answered
Call-Direction: inbound
Caller-ANI: 100
Caller-Callee-ID-Name: Outbound%20Call
Caller-Callee-ID-Number: 1000
Caller-Caller-ID-Name: 100
Caller-Caller-ID-Number: 100
Caller-Channel-Answered-Time: 1358091528773430
Caller-Channel-Bridged-Time: 0
Caller-Channel-Created-Time: 1358091527413417
Caller-Channel-Hangup-Time: 0
Caller-Channel-Hold-Accum: 0
Caller-Channel-Last-Hold: 0
Caller-Channel-Name: sofia/internal/100%40192.168.1.11
Caller-Channel-Progress-Media-Time: 1358091527453440
Caller-Channel-Progress-Time: 1358091527433428
Caller-Channel-Resurrect-Time: 0
Caller-Channel-Transfer-Time: 0
Caller-Context: default
Caller-Destination-Number: 1000
Caller-Dialplan: XML
Caller-Direction: inbound
Caller-Network-Addr: 192.168.1.11
Caller-Privacy-Hide-Name: false
Caller-Privacy-Hide-Number: false
Caller-Profile-Created-Time: 1358091527413417
Caller-Profile-Index: 1
Caller-Screen-Bit: true
Caller-Source: mod_sofia
Caller-Unique-ID: c9bbde8b-379b-45d4-b193-3f761a44f3e2
Caller-Username: 100
Channel-Call-State: ACTIVE
Channel-Call-UUID: c9bbde8b-379b-45d4-b193-3f761a44f3e2
Channel-HIT-Dialplan: true
Channel-Name: sofia/internal/100%40192.168.1.11
Channel-Presence-ID: 100%40192.168.1.11
Channel-Read-Codec-Bit-Rate: 64000
Channel-Read-Codec-Name: PCMU
Channel-Read-Codec-Rate: 8000
Channel-State: CS_EXECUTE
Channel-State-Number: 4
Channel-Write-Codec-Bit-Rate: 64000
Channel-Write-Codec-Name: PCMU
Channel-Write-Codec-Rate: 8000
Core-UUID: 347c8e76-2a34-423a-8199-50860933a276
Event-Calling-File: switch_channel.c
Event-Calling-Function: switch_channel_perform_mark_answered
Event-Calling-Line-Number: 3397
Event-Date-GMT: Sun,%2013%20Jan%202013%2015%3A38%3A48%20GMT
Event-Date-Local: 2013-01-13%2010%3A38%3A48
Event-Date-Timestamp: 1358091528773430
Event-Name: CHANNEL_ANSWER
Event-Sequence: 6730
FreeSWITCH-Hostname: aztrock-home
FreeSWITCH-IPv4: 192.168.1.11
FreeSWITCH-IPv6: %3A%3A1
FreeSWITCH-Switchname: aztrock-home
Presence-Call-Direction: inbound
Unique-ID: c9bbde8b-379b-45d4-b193-3f761a44f3e2
variable_DIALSTATUS: INVALIDARGS
variable_DP_MATCH: ARRAY%3A%3A1000%7C%3A1000
variable_RFC2822_DATE: Sun,%2013%20Jan%202013%2010%3A38%3A47%20-0500
variable_accountcode: 100
variable_advertised_media_ip: 192.168.1.11
variable_call_timeout: 30
variable_call_uuid: c9bbde8b-379b-45d4-b193-3f761a44f3e2
variable_called_party_callgroup: techsupport
variable_callgroup: techsupport
variable_channel_name: sofia/internal/100%40192.168.1.11
variable_continue_on_fail: true
variable_current_application: bridge
variable_current_application_data: user/1000%40192.168.1.11
variable_default_areacode: 918
variable_default_gateway: example.com
variable_dialed_domain: 192.168.1.11
variable_dialed_extension: 1000
variable_dialed_user: 1000
variable_direction: inbound
variable_domain_name: 192.168.1.11
variable_dtmf_type: info
variable_effective_caller_id_name: Extension%20100
variable_effective_caller_id_number: 100
variable_endpoint_disposition: EARLY%20MEDIA
variable_ep_codec_string: PCMU%408000h%4020i%4064000b,PCMA%408000h%4020i%4064000b
variable_export_vars: RFC2822_DATE,dialed_extension
variable_hangup_after_bridge

### 1.6 `CHANNEL_HANGUP` 事件

其中一个用户挂断了电话。

TODO 我们如何知道是哪一个用户挂断的？

**CHANNEL_HANGUP 示例** 源代码展示

```xml
Hangup-Cause: NORMAL_CLEARING
Channel-Read-Codec-Name: PCMU
Channel-Read-Codec-Rate: 8000
Channel-Write-Codec-Name: PCMU
Channel-Write-Codec-Rate: 8000
Caller-Username: jonas
Caller-Dialplan: XML
Caller-Caller-ID-Name: jonas
Caller-Caller-ID-Number: jonas
Caller-Network-Addr: 192.168.0.58
Caller-Destination-Number: 541
Caller-Unique-ID: 0dd4e4f7-36ed-a04d-a8f7-7aebb683af50
Caller-Source: mod_sofia
Caller-Context: default
Caller-Channel-Name: sofia/192.168.0.58/jonas%40192.168.0.58%3A5060
Caller-Screen-Bit: yes
Caller-Privacy-Hide-Name: no
Caller-Privacy-Hide-Number: no
Originatee-Username: jonas
Originatee-Dialplan: XML
Originatee-Caller-ID-Name: jonas
Originatee-Caller-ID-Number: jonas
Originatee-Network-Addr: 192.168.0.58
Originatee-Destination-Number: 192.168.0.58/arne%25192.168.0.58
Originatee-Unique-ID: f66e8e31-c9fb-9b41-a9a2-a1586facb97f
Originatee-Source: mod_sofia
Originatee-Context: default
Originatee-Channel-Name: sofia/192.168.0.58/arne
Originatee-Screen-Bit: yes
Originatee-Privacy-Hide-Name: no
Originatee-Privacy-Hide-Number: no
```

了解更多可能的[挂断原因](../../Troubleshooting-Debugging/Hangup-Cause-Code-Table_3964945.mdx#about)。

### ****1.7 `CHANNEL_HANGUP_COMPLETE` 事件****

**CHANNEL_HANGUP_COMPLETE 示例** 源代码展示

```xml
接收事件
事件名称：通道挂断完成
核心UUID：9b0de0b8-f55e-40d8-a2bd-179310b53493
FreeSWITCH主机名：myhost
FreeSWITCH IPv4：192.168.0.2
FreeSWITCH IPv6：::1
本地事件日期：2009年10月9日 20:08:26
GMT事件日期：Sat, 10 Oct 2009 00:08:26 GMT
事件时间戳：1255133306952270
调用文件：switch_core_state_machine.c
调用函数：switch_core_session_hangup_state
调用行号：503
挂断原因：正常清除
通道状态：挂断
通道状态编号：10
通道名称：sofia/internal/1000@192.168.0.2
唯一ID：e5a82e39-6dc1-4d7d-a300-aa9cd4284073
呼叫方向：呼入
Presence呼叫方向：呼入
应答状态：已应答
通道读取的编解码器名称：GSM
通道读取的编解码器速率：8000
通道写入的编解码器名称：GSM
通道写入的编解码器速率：8000
主叫用户名：1000
主叫拨号计划：XML
主叫呼叫者ID名称：1000
主叫呼叫者ID号码：1000
主叫网络地址：192.168.0.104
主叫目标号码：3030
主叫唯一ID：e5a82e39-6dc1-4d7d-a300-aa9cd4284073
主叫来源：mod_sofia
主叫上下文：default
主叫通道名称：sofia/internal/1000@192.168.0.2
主叫配置文件索引：1
主叫配置文件创建时间：1255133286498223
主叫通道创建时间：1255133286498223
主叫通道应答时间：1255133286504829
主叫通道进程时间：0
主叫通道进程媒体时间：0
主叫通道挂断时间：1255133306952270
主叫通道转接时间：0
主叫屏幕位：true
主叫隐私隐藏名称：false
主叫隐私隐藏号码：false
variable_sip_received_ip: 192.168.0.104
variable_sip_received_port: 5060
variable_sip_via_protocol: udp
variable_sip_authorized: true
variable_sip_number_alias: 1000
variable_sip_auth_username: 1000
variable_sip_auth_realm: 192.168.0.2
variable_number_alias: 1000
variable_user_name: 1000
variable_domain_name: 192.168.0.2
variable_toll_allow: domestic,international,local
variable_accountcode: 1000
variable_user_context: default
variable_effective_caller_id_name: 分机1000
variable_effective_caller_id_number: 1000
variable_outbound_caller_id_name: FreeSWITCH
variable_outbound_caller_id_number: 0000000000
variable_callgroup: techsupport
variable_record_stereo: true
variable_default_gateway: example.com
variable_default_areacode: 918
variable_transfer_fallback_extension: operator
variable_sip_from_params: transport=UDP
variable_sip_from_user: 1000
variable_sip_from_uri: 1000@192.168.0.2
variable_sip_from_host: 192.168.0.2
variable_sip_from_user_stripped: 1000
variable_sip_from_tag: 7bae8202
variable_sofia_profile_name: internal
variable_sip_req_params: transport=UDP
variable_sip_req_user: 3030
variable_sip_req_uri: 3030@192.168.0.2
variable_sip_req_host: 192.168.0.2
variable_sip_to_params: transport=UDP
variable_sip_to_user: 3030
variable_sip_to_uri: 3030@192.168.0.2
variable_sip_to_host: 192.168.0.2
variable_sip_contact_params: transport=UDP
variable_sip_contact_user: 1000
variable_sip_contact_port: 60780
variable_sip_contact_uri: 1000@190.52.138.225:60780
variable_sip_contact_host: 190.52.138.225
variable_channel_name: sofia/internal/1000@192.168.0.2
variable_sip_call_id: ODZhNDk5YzlmZDg3YTExOWU4NDU3NmM2ZmI1MzFmNDU.
variable_sip_via_host: 190.52.138.225
variable_sip_via_port: 60780
variable_sip_via_rport: 5060
variable_max_forwards: 70
variable_presence_id: 1000@192.168.0.2
variable_switch_r_sdp: v=0
o=Z 0 0 IN IP4 190.52.138.225
s=Z
c=IN IP4 190.52.138.225
t=0 0
m=audio 60790 RTP/AVP 3 110 98 8 0 101
a=rtpmap:3 GSM/8000
a=rtpmap:110 speex/8000
a=rtpmap:98 iLBC/8000
a=fmtp:98 mode=30
a=rtpmap:8 PCMA/8000
a=rtpmap:0 PCMU/8000
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15
```

variable_remote_media_ip: 190.52.138.225
variable_remote_media_port: 60790
variable_write_codec: GSM
variable_write_rate: 8000
variable_local_media_ip: 192.168.0.2
variable_local_media_port: 19878
variable_endpoint_disposition: ANSWER
variable_current_application_data: $1-192.168.0.2@default
variable_current_application: conference
variable_conference_name: $1-192.168.0.2
variable_sip_term_status: 200
variable_sip_term_cause: 16
variable_sip_user_agent: Zoiper rev.4688
variable_sip_hangup_disposition: recv_bye
variable_read_codec: GSM
variable_read_rate: 8000
variable_hangup_cause: NORMAL_CLEARING
variable_hangup_cause_q850: 16
variable_digits_dialed: none
variable_start_stamp: 2009-10-09 20:08:06
variable_profile_start_stamp: 2009-10-09 20:08:06
variable_answer_stamp: 2009-10-09 20:08:06
variable_end_stamp: 2009-10-09 20:08:26
variable_start_epoch: 1255133286
variable_start_uepoch: 1255133286498223
variable_profile_start_epoch: 1255133286
variable_profile_start_uepoch: 1255133286498223
variable_answer_epoch: 1255133286
variable_answer_uepoch: 1255133286504829
variable_progress_epoch: 0
variable_progress_uepoch: 0
variable_progress_media_epoch: 0
variable_progress_media_uepoch: 0
variable_end_epoch: 1255133306
variable_end_uepoch: 1255133306952270
variable_last_app: conference
variable_last_arg: $1-192.168.0.2@default
variable_caller_id: "1000" <1000>
variable_duration: 20
variable_billsec: 20
variable_progresssec: 0
variable_answersec: 0
variable_progress_mediasec: 0
variable_flow_billsec: 20
variable_mduration: 20454
variable_billmsec: 20448
variable_progressmsec: 0
variable_answermsec: 6
variable_progress_mediamsec: 0
variable_flow_billmsec: 20454
variable_uduration: 20454047
variable_billusec: 20447441
variable_progressusec: 0
variable_answerusec: 6606
variable_progress_mediausec: 0
variable_flow_billusec: 20454047
variable_rtp_audio_in_raw_bytes: 45765
variable_rtp_audio_in_media_bytes: 45630
variable_rtp_audio_in_packet_count: 1017
variable_rtp_audio_in_media_packet_count: 1014
variable_rtp_audio_in_skip_packet_count: 8
variable_rtp_audio_in_jb_packet_count: 0
variable_rtp_audio_in_dtmf_packet_count: 0
variable_rtp_audio_in_cng_packet_count: 0
variable_rtp_audio_in_flush_packet_count: 0
variable_rtp_audio_out_raw_bytes: 44055
variable_rtp_audio_out_media_bytes: 44055
variable_rtp_audio_out_packet_count: 979
variable_rtp_audio_out_media_packet_count: 979
variable_rtp_audio_out_skip_packet_count: 0
variable_rtp_audio_out_dtmf_packet_count: 0
variable_rtp_audio_out_cng_packet_count: 0

### 1.8 `CHANNEL_EXECUTE` 事件

该事件表示PBX正在处理通话中的某些操作。（通常是查找拨号计划）。

文档应用程序\*头部

待办事项

在[使用 mod_erlang_event 进行 IVR](../../Modules/mod-erlang-event/IVR-using-mod_erlang_event_30867811.mdx#how)的用法示例中找到了一些示例，但是在文档的任何地方都找不到关于`Application*`头部的详细信息。[mod_event_socket](../../Modules/mod_event_socket_1048924.mdx#11-acl)的`sendmsg`部分仅提到了`Application-UUID`头部：

如果您想要关联使用 sendmsg 发送的命令执行时生成的[CHANNEL_EXECUTE](Event-List_7143557.mdx#nat)和[CHANNEL_EXECUTE_COMPLETE](Event-List_7143557.mdx#nat)事件，可以添加一个自定义的 Event-UUID 头部。在相应的事件中，UUID将在 Application-UUID 头部中。如果您没有指定 Event-UUID，FreeSwitch将为 Application-UUID 生成一个UUID。

示例：

Event-UUID: 22075ce5-b67b-4f04-a6dd-1726ec14c8bf

`Application*`头部似乎与[CHANNEL_EXECUTE](Event-List_7143557.mdx#nat)和[CHANNEL_EXECUTE_COMPLETE](Event-List_7143557.mdx#nat)头部紧密关联：

<https://github.com/signalwire/freeswitch/blob/15ad4c23e259c1c2dff58f89e9124e5f36dd2e94/src/switch%5Fcore%5Fsession.c#L2870>

```cpp
	if (switch_event_create(&event, SWITCH_EVENT_CHANNEL_EXECUTE) == SWITCH_STATUS_SUCCESS) {
		switch_channel_event_set_data(session->channel, event);
		switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application", application_interface->interface_name);
		switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-Data", expanded);
		switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-UUID", app_uuid);
		switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-UUID-Name", app_uuid_name);
		switch_event_fire(&event);
	}
```

<https://github.com/signalwire/freeswitch/blob/15ad4c23e259c1c2dff58f89e9124e5f36dd2e94/src/switch%5Fcore%5Fsession.c#L2893>

```cpp
	if (switch_event_create(&event, SWITCH_EVENT_CHANNEL_EXECUTE_COMPLETE) == SWITCH_STATUS_SUCCESS) {
		const char *resp = switch_channel_get_variable(session->channel, SWITCH_CURRENT_APPLICATION_RESPONSE_VARIABLE);
		switch_channel_event_set_data(session->channel, event);
		switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application", application_interface->interface_name);
		switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-Data", expanded);
		switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-Response", resp ? resp : "_none_");
		switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-UUID", app_uuid);
		switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-UUID-Name", app_uuid_name);
		switch_event_fire(&event);
	}
```

**CHANNEL\_EXECUTE example** Expand source 
```cpp
if (switch_event_create(&event, SWITCH_EVENT_CHANNEL_EXECUTE) == SWITCH_STATUS_SUCCESS) {
    switch_channel_event_set_data(session->channel, event);
    switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application", application_interface->interface_name);
    switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-Data", expanded);
    switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-UUID", app_uuid);
    switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-UUID-Name", app_uuid_name);
    switch_event_fire(&event);
}
```

<https://github.com/signalwire/freeswitch/blob/15ad4c23e259c1c2dff58f89e9124e5f36dd2e94/src/switch%5Fcore%5Fsession.c#L2893>

```cpp
if (switch_event_create(&event, SWITCH_EVENT_CHANNEL_EXECUTE_COMPLETE) == SWITCH_STATUS_SUCCESS) {
    const char *resp = switch_channel_get_variable(session->channel, SWITCH_CURRENT_APPLICATION_RESPONSE_VARIABLE);
    switch_channel_event_set_data(session->channel, event);
    switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application", application_interface->interface_name);
    switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-Data", expanded);
    switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-Response", resp ? resp : "_none_");
    switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-UUID", app_uuid);
    switch_event_add_header_string(event, SWITCH_STACK_BOTTOM, "Application-UUID-Name", app_uuid_name);
    switch_event_fire(&event);
}
```

**CHANNEL\_EXECUTE 例子** 展开源码

```xml
Channel-Read-Codec-Name: PCMU
Channel-Read-Codec-Rate: 8000
Channel-Write-Codec-Name: PCMU
Channel-Write-Codec-Rate: 8000
Caller-Username: jonas
Caller-Dialplan: XML
Caller-Caller-ID-Name: jonas
Caller-Caller-ID-Number: jonas
Caller-Network-Addr: 192.168.0.58
Caller-Destination-Number: 541
Caller-Unique-ID: 0dd4e4f7-36ed-a04d-a8f7-7aebb683af50
Caller-Source: mod_sofia
Caller-Context: default
Caller-Channel-Name: sofia/192.168.0.58/jonas%40192.168.0.58%3A5060
Caller-Screen-Bit: yes
Caller-Privacy-Hide-Name: no
Caller-Privacy-Hide-Number: no
```

### 1.9 `CHANNEL_EXECUTE_COMPLETE` 事件

当使用`sendmsg`或`send`（？）启动的拨号计划应用程序运行完毕时，会触发此事件。

TODO 请参见第1.8节“CHANNEL_EXECUTE”事件的TODO部分。

**CHANNEL\_EXECUTE\_COMPLETE 示例** 扩展源代码

```xml
接收事件
事件名称：CHANNEL_EXECUTE_COMPLETE
核心UUID：9b0de0b8-f55e-40d8-a2bd-179310b53493
FreeSWITCH主机名：myhost
FreeSWITCH IPv4：192.168.0.2
FreeSWITCH IPv6：::1
本地事件日期：2009-10-09 20:08:26
GMT 事件日期：Sat, 10 Oct 2009 00:08:26 GMT
时间戳事件日期：1255133306952270
调用文件：switch_core_session.c
调用函数：switch_core_session_exec
调用行号：1480
通道状态：CS_HANGUP
通道状态编号：10
通道名称：sofia/internal/1000@192.168.0.2
唯一ID：e5a82e39-6dc1-4d7d-a300-aa9cd4284073
呼叫方向：入站
在场呼叫方向：入站
应答状态：已接听
通道读取编解码器名称：GSM
通道读取编解码器速率：8000
通道写入编解码器名称：GSM
通道写入编解码器速率：8000
呼叫者用户名：1000
呼叫者拨号计划：XML
呼叫者呼叫方ID名称：1000
呼叫者呼叫方ID号码：1000
呼叫者网络地址：192.168.0.104
呼叫目标号码：3030
呼叫者唯一ID：e5a82e39-6dc1-4d7d-a300-aa9cd4284073
呼叫来源：mod_sofia
呼叫上下文：default
呼叫通道名称：sofia/internal/1000@192.168.0.2
呼叫配置文件索引：1
呼叫配置文件创建时间：1255133286498223
呼叫通道创建时间：1255133286498223
呼叫通道接听时间：1255133286504829
呼叫通道进度时间：0
呼叫通道进度媒体时间：0
呼叫通道挂断时间：0
呼叫通道转移时间：0
呼叫屏幕位：true
呼叫隐私隐藏名称：false
呼叫隐私隐藏号码：false
变量_sip_received_ip：192.168.0.104
变量_sip_received_port：5060
变量_sip_via_protocol：udp
变量_sip_authorized：true
变量_sip_number_alias：1000
变量_sip_auth_username：1000
变量_sip_auth_realm：192.168.0.2
变量_number_alias：1000
变量_user_name：1000
变量_domain_name：192.168.0.2
变量_toll_allow：domestic,international,local
变量_accountcode：1000
变量_user_context：default
变量_effective_caller_id_name：分机1000
变量_effective_caller_id_number：1000
变量_outbound_caller_id_name：FreeSWITCH
变量_outbound_caller_id_number：0000000000
变量_callgroup：techsupport
变量_record_stereo：true
变量_default_gateway：example.com
变量_default_areacode：918
变量_transfer_fallback_extension：operator
变量_sip_from_params：transport=UDP
变量_sip_from_user：1000
变量_sip_from_uri：1000@192.168.0.2
变量_sip_from_host：192.168.0.2
变量_sip_from_user_stripped：1000
变量_sip_from_tag：7bae8202
变量_sofia_profile_name：internal
变量_sip_req_params：transport=UDP
变量_sip_req_user：3030
变量_sip_req_uri：3030@192.168.0.2
变量_sip_req_host：192.168.0.2
变量_sip_to_params：transport=UDP
变量_sip_to_user：3030
变量_sip_to_uri：3030@192.168.0.2
变量_sip_to_host：192.168.0.2
变量_sip_contact_params：transport=UDP
变量_sip_contact_user：1000
变量_sip_contact_port：60780
变量_sip_contact_uri：1000@190.52.138.225:60780
变量_sip_contact_host：190.52.138.225
变量_channel_name：sofia/internal/1000@192.168.0.2
变量_sip_call_id：ODZhNDk5YzlmZDg3YTExOWU4NDU3NmM2ZmI1MzFmNDU.
变量_sip_via_host：190.52.138.225
变量_sip_via_port：60780
变量_sip_via_rport：5060
变量_max_forwards：70
变量_presence_id：1000@192.168.0.2
变量_switch_r_sdp：v=0
o=Z 0 0 IN IP4 190.52.138.225
s=Z
c=IN IP4 190.52.138.225
t=0 0
m=audio 60790 RTP/AVP 3 110 98 8 0 101
a=rtpmap:3 GSM/8000
a=rtpmap:110 speex/8000
a=rtpmap:98 iLBC/8000
a=fmtp:98 mode=30
a=rtpmap:8 PCMA/8000
a=rtpmap:0 PCMU/8000
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15
```

variable_remote_media_ip: 190.52.138.225
variable_remote_media_port: 60790
variable_write_codec: GSM
variable_write_rate: 8000
variable_local_media_ip: 192.168.0.2
variable_local_media_port: 19878
variable_endpoint_disposition: ANSWER
variable_current_application_data: $1-192.168.0.2@default
variable_current_application: conference
variable_conference_name: $1-192.168.0.2
variable_sip_term_status: 200
variable_sip_term_cause: 16
variable_sip_user_agent: Zoiper rev.4688
variable_sip_hangup_disposition: recv_bye
variable_read_codec: GSM
variable_read_rate: 8000
Application: conference
Application-Data: $1-192.168.0.2@default
Application-Response: _none

### 1.10 `CHANNEL_BRIDGE` 事件

正在两个端点之间建立呼叫桥接。

**CHANNEL\_BRIDGE 事件示例** 展开源代码

```xml
事件名称: CHANNEL_BRIDGE
核心UUID: 17c1c070-8a13-11de-9ab6-91a5c9f91e77
FreeSWITCH主机名: jmesquita-dell
FreeSWITCH-IPv4: 186.18.21.203
FreeSWITCH-IPv6: %3A%3A1
事件本地日期: 2009-08-17%2003%3A20%3A17
事件GMT日期: 星期一，2009年8月17日，06%3A20%3A17%20GMT
事件时间戳: 1250490017110617
调用文件: switch_ivr_bridge.c
调用函数: switch_ivr_multi_threaded_bridge
调用行号: 847
通道状态: CS_EXECUTE
通道状态号: 4
通道名称: sofia/internal/1001%40192.168.1.100
唯一ID: 071ed3fa-8af6-11de-9ab6-91a5c9f91e77
呼叫方向: 呼入
Presence呼叫方向: 呼入
应答状态: 已接听
通道读取编解码器名称: G722
通道读取编解码器速率: 16000
通道写入编解码器名称: G722
通道写入编解码器速率: 16000
呼叫者用户名: 1001
呼叫者拨号计划: XML
呼叫者呼叫方ID名称: 1001
呼叫者呼叫方ID号码: 1001
呼叫方网络地址: 192.168.1.100
呼叫目标号码: 1000
呼叫者唯一ID: 071ed3fa-8af6-11de-9ab6-91a5c9f91e77
呼叫者来源: mod_sofia
呼叫者上下文: 默认
呼叫者通道名称: sofia/internal/1001%40192.168.1.100
呼叫者配置文件索引: 1
呼叫者配置文件创建时间: 1250490015373695
呼叫者通道创建时间: 1250490015373695
呼叫者通道应答时间: 1250490017110617
呼叫者通道进展时间: 1250490015498382
呼叫者通道进展媒体时间: 1250490015453696
呼叫者通道挂断时间: 0
呼叫者通道转接时间: 0
呼叫者屏幕位: true
呼叫者隐私隐藏名称: false
呼叫者隐私隐藏号码: false
另一方用户名: 1001
另一方拨号计划: XML
另一方呼叫方ID名称: 分机%201001
另一方呼叫方ID号码: 1001
另一方网络地址: 192.168.1.101
另一方目标号码: sip%3A1000%40192.168.1.101%3Bline%3D23857
另一方唯一ID: 072a3ec0-8af6-11de-9ab6-91a5c9f91e77
另一方来源: mod_sofia
另一方上下文: 默认
另一方通道名称: sofia/internal/sip%3A1000%40192.168.1.101
另一方屏幕位: true
另一方隐私隐藏名称: false
另一方隐私隐藏号码: false
variable_sip_received_ip: 192.168.1.100
variable_sip_received_port: 46078
variable_sip_via_protocol: udp
variable_sip_authorized: true
variable_sip_number_alias: 1001
variable_sip_auth_username: 1001
variable_sip_auth_realm: 192.168.1.100
variable_number_alias: 1001
variable_user_name: 1001
variable_domain_name: 192.168.1.100
variable_toll_allow: domestic,international,local
variable_accountcode: 1001
variable_user_context: 默认
variable_effective_caller_id_name: 分机%201001
variable_effective_caller_id_number: 1001
variable_outbound_caller_id_name: FreeSWITCH
variable_outbound_caller_id_number: 0000000000
variable_callgroup: 技术支持
variable_record_stereo: true
variable_default_gateway: example.com
variable_default_areacode: 918
variable_transfer_fallback_extension: operator
variable_sip_from_user: 1001
variable_sip_from_uri: 1001%40192.168.1.100
variable_sip_from_host: 192.168.1.100
variable_sip_from_user_stripped: 1001
variable_sip_from_tag: ulbLuyOsz-Cyq3aAMLbhy8E07medSwoc
variable_sofia_profile_name: internal
variable_sip_req_user: 1000
variable_sip_req_uri: 1000%40192.168.1.100
variable_sip_req_host: 192.168.1.100
variable_sip_to_user: 1000
variable_sip_to_uri: 1000%40192.168.1.100
variable_sip_to_host: 192.168.1.100
variable_sip_contact_params: transport%3DUDP
variable_sip_contact_user: 1001
variable_sip_contact_port: 46078
variable_sip_contact_uri: 1001%40192.168.1.100%3A46078
variable_sip_contact_host: 192.168.1.100
variable_channel_name: sofia/internal/1001%40192.168.1.100
variable_sip_call_id: pbjcq1MU4CLZCKII65OiTblCSeVuEtzU
variable_sip_user_agent: LightPhone%20v1.0.0
variable_sip_via_host: 186.18.21.203
variable_sip_via_port: 46078
variable_sip_via_rport: 46078
variable_max_forwards: 70
variable_presence_id: 1001%40192.168.1.100
variable_switch_r_sdp: v%3D0%0D%0Ao%3D-%203459478815%203459478815%20IN%20IP4%20186.18.21.203%0D%0As%3Dpjmedia%0D%0Ac%3DIN%20IP4%20186.18.21.203%0D%0At%3D0%200%0D%0Aa%3DX-nat%3A0%0D%0Am%3Daudio%204004%20RTP/AVP%209%208%200%203%20113%

### 1.11 `CHANNEL_UNBRIDGE` 事件

桥接已终止。由于桥接存在于呼叫的生命周期中，呼叫本身很可能也会终止。

**`CHANNEL_UNBRIDGE` 例子** 展开源代码

```xml
Channel-Read-Codec-Name; PCMU
Channel-Read-Codec-Rate; 8000
Channel-Write-Codec-Name; PCMU
Channel-Write-Codec-Rate; 8000
Caller-Username; jonas
Caller-Dialplan; XML
Caller-Caller-ID-Name; jonas
Caller-Caller-ID-Number; jonas
Caller-Network-Addr; 192.168.0.58
Caller-Destination-Number; 541
Caller-Unique-ID; 0dd4e4f7-36ed-a04d-a8f7-7aebb683af50
Caller-Source; mod_sofia
Caller-Context; default
Caller-Channel-Name; sofia/192.168.0.58/jonas@192.168.0.58:5060
Caller-Screen-Bit; yes
Caller-Privacy-Hide-Name; no
Caller-Privacy-Hide-Number; no
Originatee-Username; jonas
Originatee-Dialplan; XML
Originatee-Caller-ID-Name; jonas
Originatee-Caller-ID-Number; jonas
Originatee-Network-Addr; 192.168.0.58
Originatee-Destination-Number; 192.168.0.58/arne%192.168.0.58
Originatee-Unique-ID; f66e8e31-c9fb-9b41-a9a2-a1586facb97f
Originatee-Source; mod_sofia
Originatee-Context; default
Originatee-Channel-Name; sofia/192.168.0.58/arne
Originatee-Screen-Bit; yes
Originatee-Privacy-Hide-Name; no
Originatee-Privacy-Hide-Number; no
```

### 1.12 `CHANNEL_PROGRESS` 事件

对于出站呼叫，对方正在振铃；对于入站呼叫，该方正在振铃。

### 1.13 `CHANNEL_PROGRESS_MEDIA` 事件

请参阅 **1.12 `CHANNEL_PROGRESS`** 事件部分。

### 1.14 `CHANNEL_OUTGOING` 事件

正在创建一个外拨呼叫。

### 1.15 `CHANNEL_PARK` 事件

呼叫正在被停靠在PBX中。

### 1.16 `CHANNEL_UNPARK` 事件

呼叫正在被取消停靠。

### 1.17 `CHANNEL_APPLICATION` 事件

这个事件是由[mod\_dptools: event](../../Modules/mod-dptools/6586582.mdx#about)产生的：

```xml
<action application='event' data='Event-Subclass=channel_state_change,State=checking_voicemail'/>
```

您可以使用它来捕获呼叫中发生的某些转换。

**CHANNEL\_APPLICATION示例** 展开源代码

```xml
 Content-Length: 1586
 Content-Type: text/event-plain
 
 Event-Subclass: channel_state_change
 Event-Name: CHANNEL_APPLICATION
 Core-UUID: d5cdc6a2-ec00-46fe-97b0-8bbb734bb1fa
 FreeSWITCH-Hostname: centos53_02005
 FreeSWITCH-IPv4: 192.168.2.5
 FreeSWITCH-IPv6: ::1
 Event-Date-Local: 2010-02-23 00:15:37
 Event-Date-GMT: Mon, 22 Feb 2010 15:15:37 GMT
 Event-Date-Timestamp: 1266851737846113
 Event-Calling-File: mod_dptools.c
 Event-Calling-Function: event_function
 Event-Calling-Line-Number: 981
 State: checking_voicemail.
 Channel-State: CS_EXECUTE
 Channel-State-Number: 4
 Channel-Name: sofia/internal/23702@domain23702.com
 Unique-ID: 482c78ba-a2bf-4324-bf09-388b7b5fbb54
 Call-Direction: inbound
 Presence-Call-Direction: inbound
 Answer-State: ringing
 Channel-Read-Codec-Name: PCMU
 Channel-Read-Codec-Rate: 8000
 Channel-Write-Codec-Name: PCMU
 Channel-Write-Codec-Rate: 8000
 Caller-Username: 23702
 Caller-Dialplan: XML
 Caller-Caller-ID-Name: 23702
 Caller-Caller-ID-Number: 23702
 Caller-Network-Addr: 192.168.2.5
 Caller-ANI: 23702
 Caller-Destination-Number: 2000
 Caller-Unique-ID: 482c78ba-a2bf-4324-bf09-388b7b5fbb54
 Caller-Source: mod_sofia
 Caller-Context: internal
 Caller-Channel-Name: sofia/internal/23702@domain23702.com
 Caller-Profile-Index: 1
 Caller-Profile-Created-Time: 1266851737825925
 Caller-Channel-Created-Time: 1266851737825925
 Caller-Channel-Answered-Time: 0
 Caller-Channel-Progress-Time: 0
 Caller-Channel-Progress-Media-Time: 0
 Caller-Channel-Hangup-Time: 0
 Caller-Channel-Transfer-Time: 0
 Caller-Screen-Bit: true
 Caller-Privacy-Hide-Name: false
 Caller-Privacy-Hide-Number: false
```

### 1.18 `CHANNEL_HOLD`事件

当一个通道被放置在保持状态时，通过使用`uuid_hold`（参见[mod_commands](../../Modules/mod_commands_1966741.mdx#--)）或接收带有`a=readonly`的SDP来触发。

**CHANNEL_HOLD示例**

```xml
Event-Name: CHANNEL_HOLD
.
.
Channel-Call-State: HELD
.
.
```

### 1.19 `CHANNEL_UNHOLD`事件

在`uuid_hold off <uuid>` 或收到带有a=sendrecv的INVITE SDP之后触发。

**CHANNEL_UNHOLD示例**

```xml
Event-Name: CHANNEL_UNHOLD
.
.
Channel-Call-State: ACTIVE
.
.
```

### 1.20 `CHANNEL_ORIGINATE`事件

当一个呼叫（或桥接）完成时，将触发通道发起事件。

### 1.21 `CHANNEL_UUID`事件

该事件指示通道的`Unique-ID`已更改。原始ID将由`Old-Unique-ID`报告。

当您使用`originate`命令的`origination_uuid`参数以及`bridge`命令时，该事件将发生（参见[mod_commands](../../Modules/mod_commands_1966741.mdx#--)）。

**CHANNEL_UUID示例** 展开源码

```xml
Content-Length: 1533
Content-Type: text/event-plain
Event-Name: CHANNEL_UUID
Core-UUID: 4611b345-99a3-4db4-b6aa-1a7886cb5474
FreeSWITCH-Hostname: centos53_02005
FreeSWITCH-IPv4: 192.168.2.5
FreeSWITCH-IPv6: ::1
Event-Date-Local: 2009-12-17 14:26:23
Event-Date-GMT: Thu, 17 Dec 2009 05:26:23 GMT
Event-Date-Timestamp: 1261027583770715
Event-Calling-File: switch_core_session.c
Event-Calling-Function: switch_core_session_set_uuid
Event-Calling-Line-Number: 1240
Old-Unique-ID: a720de78-b931-440b-8536-d4310d42dbf5
Channel-State: CS_INIT
Channel-State-Number: 1
Channel-Name: sofia/internal/1234@192.168.4.6
Unique-ID: 93fc891f-911f-42c5-9d22-226b27598f79
Call-Direction: outbound
Presence-Call-Direction: outbound
Answer-State: ringing
Caller-Caller-ID-Name: FreeSWITCH
Caller-Caller-ID-Number: 0000000000
Caller-Destination-Number: 1234
Caller-Unique-ID: a720de78-b931-440b-8536-d4310d42dbf5
Caller-Source: src/switch_ivr_originate.c
Caller-Context: default
Caller-Channel-Name: sofia/internal/1234@192.168.4.6
Caller-Profile-Index: 1
Caller-Profile-Created-Time: 1261027583770715
Caller-Channel-Created-Time: 1261027583770715
Caller-Channel-Answered-Time: 0
Caller-Channel-Progress-Time: 0
Caller-Channel-Progress-Media-Time: 0
Caller-Channel-Hangup-Time: 0
Caller-Channel-Transfer-Time: 0
Caller-Screen-Bit: true
Caller-Privacy-Hide-Name: false
Caller-Privacy-Hide-Number: false
variable_sip_profile_name: internal
variable_channel_name: sofia/internal/1234@192.168.4.6
variable_sip_destination_url: sip:1234@192.168.4.6
variable_is_outbound: true
```

## 2. 系统事件

### 关机（SHUTDOWN）

在FreeSWITCH开始关机序列时触发。

Content-Length: 464
Content-Type: text/event-plain

```
事件信息: 系统关机
事件名称: SHUTDOWN
核心UUID: 596ab2fd-14c5-44b5-a02b-93ffb7cd5dd6
FreeSWITCH主机名: ********
FreeSWITCH IPv4: ********
FreeSWITCH IPv6: 127.0.0.1
本地事件日期: 2008年01月23日 13:48:13
GMT事件日期: 2008年01月23日 18:48:13 GMT
事件时间戳: 1201114093012795
调用文件: switch_core.c
调用函数: switch_core_destroy
行号: 1046

### MODULE_LOAD

当模块加载完成时触发。

内容长度: 480
内容类型: text/event-plain

类型: codec
名称: LPC-10 2.4kbps
事件名称: MODULE_LOAD
核心UUID: 2130a7d1-c1f7-44cd-8fae-8ed5946f3cec
FreeSWITCH主机名: localhost.localdomain
FreeSWITCH IPv4: 10.0.1.250
FreeSWITCH IPv6: 127.0.0.1
本地事件日期: 2007年12月16日 22:24:56
GMT事件日期: 2007年12月17日 04:24:56 GMT
事件时间戳: 1197865496783828
调用文件: switch_loadable_module.c
调用函数: switch_loadable_module_process
行号: 174

### MODULE_UNLOAD

当模块卸载完成时触发。

类型: application
名称: lua
描述: 启动LUA ivr
语法: %3Cscript%3E
事件名称: MODULE_UNLOAD
核心UUID: ab0feafa-a9b0-4d77-b0a8-341d6b100b4f
FreeSWITCH主机名: vertux
FreeSWITCH IPv4: 192.168.77.248
FreeSWITCH IPv6: %3A%3A1
本地事件日期: 2008年12月11日 13:14:23
GMT事件日期: 2008年12月11日 12:14:23 GMT
事件时间戳: 1228997663531389
调用文件: switch_loadable_module.c
调用函数: switch_loadable_module_unprocess
行号: 524

### RELOADXML

当xml配置文件重新加载完成时触发。
```

事件名称: RELOADXML
核心UUID: 6c6def18-9562-de11-a8e0-001fc6ab49e2
FreeSWITCH主机名: localhost.localdomain
FreeSWITCH-IPv4: 10.0.1.250
FreeSWITCH-IPv6: %3A%3A1
本地事件日期: 2009-06-26 17:06:33
GMT事件日期: 星期五, 2009年6月26日 21:06:33 GMT
事件日期时间戳: 1246050393884782
调用文件: switch_xml.c
调用函数: switch_xml_open_root
调用行号: 1917

### 通知

### 发送消息

### 接收消息

### 请求参数

### 通道数据

### 常规

### 命令

### 会话心跳

接收事件
事件名称：SESSION_HEARTBEAT
核心UUID：9b0de0b8-f55e-40d8-a2bd-179310b53493
FreeSWITCH主机名：myhost
FreeSWITCH IPv4地址：192.168.0.2
FreeSWITCH IPv6地址：::1
本地事件日期：2009-10-09 20:08:26
GMT事件日期：Sat, 10 Oct 2009 00:08:26 GMT
事件时间戳：1255133306752006
调用文件：switch_core_io.c
调用函数：switch_core_session_read_frame
调用行号：146
通道状态：CS_EXECUTE
通道状态编号：4
通道名称：sofia/internal/1000@192.168.0.2
唯一标识符：e5a82e39-6dc1-4d7d-a300-aa9cd4284073
呼叫方向：呼入
存在性呼叫方向：呼入
应答状态：已应答
通道读取编解码器名称：L16
通道读取编解码器速率：8000
通道写入编解码器名称：GSM
通道写入编解码器速率：8000
呼叫方用户名：1000
呼叫方拨号计划：XML
呼叫方呼叫者ID名称：1000
呼叫方呼叫者ID号码：1000
呼叫方网络地址：192.168.0.104
呼叫方目标号码：3030
呼叫方唯一标识符：e5a82e39-6dc1-4d7d-a300-aa9cd4284073
呼叫方来源：mod_sofia
呼叫方上下文：default
呼叫方通道名称：sofia/internal/1000@192.168.0.2
呼叫方配置文件索引：1
呼叫方配置文件创建时间：1255133286498223
呼叫方通道创建时间：1255133286498223
呼叫方通道应答时间：1255133286504829
呼叫方通道进程时间：0
呼叫方通道媒体进程时间：0
呼叫方通道挂断时间：0
呼叫方通道转移时间：0
呼叫方屏幕位：true
呼叫方隐私隐藏名称：false
呼叫方隐私隐藏号码：false
variable_sip_received_ip: 192.168.0.104
variable_sip_received_port: 5060
variable_sip_via_protocol: udp
variable_sip_authorized: true
variable_sip_number_alias: 1000
variable_sip_auth_username: 1000
variable_sip_auth_realm: 192.168.0.2
variable_number_alias: 1000
variable_user_name: 1000
variable_domain_name: 192.168.0.2
variable_toll_allow: domestic,international,local
variable_accountcode: 1000
variable_user_context: default
variable_effective_caller_id_name: 分机 1000
variable_effective_caller_id_number: 1000
variable_outbound_caller_id_name: FreeSWITCH
variable_outbound_caller_id_number: 0000000000
variable_callgroup: techsupport
variable_record_stereo: true
variable_default_gateway: example.com
variable_default_areacode: 918
variable_transfer_fallback_extension: operator
variable_sip_from_params: transport=UDP
variable_sip_from_user: 1000
variable_sip_from_uri: 1000@192.168.0.2
variable_sip_from_host: 192.168.0.2
variable_sip_from_user_stripped: 1000
variable_sip_from_tag: 7bae8202
variable_sofia_profile_name: internal
variable_sip_req_params: transport=UDP
variable_sip_req_user: 3030
variable_sip_req_uri: 3030@192.168.0.2
variable_sip_req_host: 192.168.0.2
variable_sip_to_params: transport=UDP
variable_sip_to_user: 3030
variable_sip_to_uri: 3030@192.168.0.2
variable_sip_to_host: 192.168.0.2
variable_sip_contact_params: transport=UDP
variable_sip_contact_user: 1000
variable_sip_contact_port: 60780
variable_sip_contact_uri: 1000@190.52.138.225:60780
variable_sip_contact_host: 190.52.138.225
variable_channel_name: sofia/internal/1000@192.168.0.2
variable_sip_call_id: ODZhNDk5YzlmZDg3YTExOWU4NDU3NmM2ZmI1MzFmNDU.
variable_sip_user_agent: Zoiper rev.4688
variable_sip_via_host: 190.52.138.225
variable_sip_via_port: 60780
variable_sip_via_rport: 5060
variable_max_forwards: 70
variable_presence_id: 1000@192.168.0.2
variable_switch_r_sdp: v=0
o=Z 0 0 IN IP4 190.52.138.225
s=Z
c=IN IP4 190.52.138.225
t=0 0
m=audio 60790 RTP/AVP 3 110 98 8 0 101
a=rtpmap:3 GSM/8000
a=rtpmap:110 speex/8000
a=rtpmap:98 iLBC/8000
a=fmtp:98 mode=30
a=rtpmap:8 PCMA/8000
a=rtpmap:0 PCMU/8000
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15

variable_remote_media_ip: 190.52.138.225  
variable_remote_media_port: 60790  
variable_write_codec: GSM  
variable_write_rate: 8000  
variable_local_media_ip: 192.168.0.2  
variable_local_media_port: 19878  
variable_endpoint_disposition: ANSWER  
variable_current_application_data: $1-192.168.0.2@default  
variable_current_application: conference  
variable_conference_name: $1-192.168.0.2  
variable_read_codec: L16  
variable_read_rate: 8000

### CLIENT_DISCONNECTED

### SERVER_DISCONNECTED

### SEND_INFO

### RECV_INFO

### CALL_SECURE

### NAT

### RECORD_START

### RECORD_STOP

### PLAYBACK_START

每次开始新的播放时收到。如果在调用播放应用程序时设置了多个文件，将为每个要播放的文件收到 PLAYBACK_START 和 PLAYBACK_STOP 事件。

还可以查看<http://wiki.freeswitch.org/wiki/Misc.%5FDialplan%5FTools%5Fplayback#Example%5Ffor%5Fspecific%5Fplayback%5Fvariables>，了解如何设置将跟随事件的特定变量的信息。

### PLAYBACK_STOP

参见 PLAYBACK_START。

### CALL_UPDATE

告诉我们此通道通过 "Bridged-To" 标头桥接到哪个 UUID。

Event-Name: CALL_UPDATE
...
Unique-ID: f3ebca6c-d9cd-4f89-ae12-748e6c479dda
Bridged-To: ada7f3de-2374-4144-9b1d-eade29df0779
Direction: SEND
Channel-State: CS_EXCHANGE_MEDIA
Channel-Call-State: ACTIVE
Channel-Name: sofia/internal/sip:9998@192.168.56.1:56454
Call-Direction: outbound
Presence-Call-Direction: outbound
Channel-Presence-ID: 9998@192.168.56.2
Channel-Call-UUID: ada7f3de-2374-4144-9b1d-eade29df0779
Answer-State: answered
...

## 3. 其他事件

### API

已调用一个API函数。

可以在[mod_commands](https://wiki.freeswitch.org/wiki/Mod%5Fcommands "Mod commands")部分找到API命令的文档。

事件名称：API
核心UUID：f3c23231-f251-49d8-bbf6-fe5c52af3762
FreeSWITCH主机名：fstest
FreeSWITCH交换机名称：fstest
FreeSWITCH-IPv4：192.168.20.73
FreeSWITCH-IPv6： %3A%3A1
本地事件日期：2013-04-12%2012%3A01%3A31
GMT事件日期：Fri,%2012%20Apr%202013%2010%3A01%3A31%20GMT
事件时间戳：1365760891105542
调用文件：switch_loadable_module.c
调用函数：switch_api_execute
调用行号：2282
事件序列：2311
API命令：version

### BACKGROUND_JOB

使用此命令在使用bgapi调用启动的作业完成时接收事件。BACKGROUND_JOB事件将包含一个与在调用bgapi时服务器返回的Job-UUID相匹配的Job-UUID。

以下示例是在[mod_event_socket](https://wiki.freeswitch.org/wiki/Event%5FSocket "Event Socket")客户端上下文中的。

监听事件

event plain BACKGROUND_JOB

调用bgapi

bgapi originate sofia/mydomain.com/foo@bar.com &park()

服务器响应

Content-Type: command/reply
Reply-Text: +OK Job-UUID: e3054f48-151e-11dc-842a-d3a3942d3d63

作业完成后，服务器响应

Content-Length: 625
Content-Type: text/event-plain

任务-UUID: 7f4db78a-17d7-11dd-b7a0-db4edd065621
任务-命令: 发起
任务-命令-参数: sofia/default/1005%20'%26park'
事件名称: 背景任务
核心-UUID: 42bdf272-16e6-11dd-b7a0-db4edd065621
FreeSWITCH主机名: ser
FreeSWITCH-IPv4: 192.168.1.104
FreeSWITCH-IPv6: 127.0.0.1
本地事件日期: 2008-05-02%2007%3A37%3A03
GMT事件日期: 星期四,%2001%20May%202008%2023%3A37%3A03%20GMT
事件日期时间戳: 1209685023894968
事件调用文件: mod_event_socket.c
事件调用函数: api_exec
事件调用行号: 609
内容长度: 41

+OK 7f4de4bc-17d7-11dd-b7a0-db4edd065621

需要注意的是，背景任务事件中的第二个内容长度(Content-Length)表示作为事件主体返回的任务UUID的长度。

### 自定义

请参见**2.2子类(或`CUSTOM`事件)**部分。

### 重新调度

在PBX中重新调度任务。

事件特定键/值:

任务ID: 1
任务描述: 心跳
任务分组: 核心
任务运行时间: 1178646608

### 心跳

由FreeSWITCH每20秒发送的心跳触发的FreeSWITCH的状态信息。

事件特定信息:

内容长度: 605
内容类型: 文本/普通事件

事件信息: 系统就绪
运行时间: 0 年, 0 天, 0 小时, 0 分钟, 40 秒, 0 毫秒, 0 微秒
会话数量: 0
每秒会话数: 500
事件名称: 心跳
核心-UUID: 596ab2fd-14c5-44b5-a02b-93ffb7cd5dd6
FreeSWITCH主机名: ********
FreeSWITCH-IPv4: ********
FreeSWITCH-IPv6: 127.0.0.1
本地事件日期: 2008-01-23%2013%3A39%3A06
GMT事件日期: 星期三,%2023%20Jan%202008%2018%3A39%3A06%20GMT
事件日期时间戳: 1201113546203319
事件调用文件: switch_core.c
事件调用函数: send_heartbeat
事件调用行号: 74

  
### 检测到音调

当检测到音调时发送的事件。

当由`<action application="fax_detect"/>`生成的事件中检测到传真信号时的示例：

检测到的信号：传真
事件名称：DETECTED_TONE
核心UUID：5859d2de-ccec-11dc-aab0-69b2875ec123
FreeSWITCH主机名：abacus
FreeSWITCH IPv4地址：<myip>
FreeSWITCH IPv6地址：127.0.0.1
本地事件日期：2008-01-27%2017%3A19%3A30
GMT事件日期：星期日，2008年1月27日 16%3A19%3A30 GMT
事件时间戳：1201450770979522
调用文件：switch_ivr_async.c
调用函数：tone_detect_callback
调用行号：1098

### ALL

将显示所有事件，包括自定义事件。并没有名为ALL的事件。这与在指定要接收的事件时使用宏类似。

## 6. 未记录的事件

### LOG

### INBOUND_CHAN

### OUTBOUND_CHAN

### STARTUP

### PUBLISH

### UNPUBLISH

### TALK

当通道检测到语音时触发。需要在SIP配置文件中设置参数"vad"。例如：

&lt;param name="vad" value="both"/>

您还需要设置一些通道变量才能正常工作：

&lt;action application="export" data="fire_talk_events=true"/>
&lt;action application="export" data="fire_not_talk_events=true"/>

事件名称：TALK
核心UUID：da0f9ecb-5e56-4be6-891d-a6c7b86c98f6
FreeSWITCH主机名：fstest
FreeSWITCH交换机名称：fstest
FreeSWITCH IPv4地址：192.168.20.73
FreeSWITCH IPv6地址：%3A%3A1
本地事件日期：2013-04-12%2012%3A10%3A36
GMT事件日期：星期五，2013年4月12日 10%3A10%3A36 GMT
事件时间戳：1365761436805557
调用文件：switch_rtp.c
调用函数：rtp_common_write
调用行号：5329
事件序列号：532

### NOTALK

当通道上的语音关闭时触发。

活动名称：NOTALK
核心UUID：da0f9ecb-5e56-4be6-891d-a6c7b86c98f6
FreeSWITCH主机名：fstest
FreeSWITCH交换机名称：fstest
FreeSWITCH IPv4地址：192.168.20.73
FreeSWITCH IPv6地址：%3A%3A1
本地事件日期：2013-04-12 12:10:36
GMT事件日期：Fri, 12 Apr 2013 10:10:36 GMT
事件日期时间戳：1365761436805557
调用文件：switch_rtp.c
调用函数：rtp_common_write
调用行号：5329
事件序列：532

### 会话崩溃

### DTMF（双音多频信号）

内容长度：3419
内容类型：text/event-plain

```markdown
Channel-State: CS_EXECUTE
Channel-State-Number: 4
Channel-Name: sofia/default/1006%4010.0.1.250%3A5060
Unique-ID: 8dcbb29e-b349-462a-84ca-b0ec73681284
Call-Direction: inbound
Answer-State: answered
Channel-Read-Codec-Name: G722
Channel-Read-Codec-Rate: 16000
Channel-Write-Codec-Name: G722
Channel-Write-Codec-Rate: 16000
Caller-Username: 1006
Caller-Dialplan: XML
Caller-Caller-ID-Name: Brian%20West
Caller-Caller-ID-Number: 1006
Caller-Network-Addr: 10.0.1.240
Caller-Destination-Number: 9999
Caller-Unique-ID: 8dcbb29e-b349-462a-84ca-b0ec73681284
Caller-Source: mod_sofia
Caller-Context: default
Caller-Channel-Name: sofia/default/1006%4010.0.1.250%3A5060
Caller-Channel-Created-Time: 1197864491030187
Caller-Channel-Answered-Time: 1197864491080700
Caller-Channel-Hangup-Time: 0
Caller-Channel-Transfer-Time: 0
Caller-Screen-Bit: yes
Caller-Privacy-Hide-Name: no
Caller-Privacy-Hide-Number: no
variable_sip_authorized: true
variable_sip_mailbox: 1006
variable_sip_auth_username: 1006
variable_sip_auth_realm: 10.0.1.250
variable_mailbox: 1006
variable_accountcode: 1006
variable_presence_id: 1006%4010.0.1.250
variable_user_context: default
variable_effective_caller_id_name: Extension%201006
variable_effective_caller_id_number: 1006
variable_sip_from_user: 1006
variable_sip_from_port: 5060
variable_sip_from_uri: 1006%4010.0.1.250%3A5060
variable_sip_from_host: 10.0.1.250
variable_sip_from_user_stripped: 1006
variable_sofia_profile_name: default
variable_sip_req_user: 9999
variable_sip_req_port: 5060
variable_sip_req_uri: 9999%4010.0.1.250%3A5060
variable_sip_req_host: 10.0.1.250
variable_sip_to_user: 9999
variable_sip_to_port: 5060
variable_sip_to_uri: 9999%4010.0.1.250%3A5060
variable_sip_to_host: 10.0.1.250
variable_sip_contact_user: 1006
variable_sip_contact_port: 5060
variable_sip_contact_uri: 1006%4010.0.1.240%3A5060
variable_sip_contact_host: 10.0.1.240
variable_channel_name: sofia/default/1006%4010.0.1.250%3A5060
variable_sip_call_id: 7f5751d4-f37ede8d-6a4498be%4010.0.1.240
variable_sip_via_host: 10.0.1.240
variable_sip_via_port: 5060
variable_max_forwards: 70
variable_switch_r_sdp: v%3D0%0D%0Ao%3D-%201197864004%201197864004%20IN%20IP4%2010.0.1.240%0D%0As%3DPolycom%20IP%20Phone%0D%0Ac%3DIN%20IP4%2010.0.1.240%0D%0At%3D0%200%0D%0Aa%3Dsendrecv%0D%0Am%3Daudio%202230%20RTP/AVP%209%200%208%2018%20101%0D%0Aa%3Drtpmap%3A9%20G722/8000%0D%0Aa%3Drtpmap%3A0%20PCMU/8000%0D%0Aa%3Drtpmap%3A8%20PCMA/8000%0D%0Aa%3Drtpmap%3A18%20G729/8000%0D%0Aa%3Drtpmap%3A101%20telephone-event/8000%0D%0A
variable_remote_media_ip: 10.0.1.240
variable_remote_media_port: 2230
variable_read_codec: G722
variable_read_rate: 16000
variable_write_codec: G722
variable_write_rate: 16000
variable_use_profile: nat
variable_numbering_plan: US
variable_default_gateway: asterlink.com
variable_default_area_code: 918
variable_user_name: default
variable_domain_name: 10.0.1.250
variable_local_media_ip: 10.0.1.250
variable_local_media_port: 2230
variable_endpoint_disposition: ANSWER
DTMF-Digit: 1
DTMF-Duration: 2000
Event-Name: DTMF
Core-UUID: 2130a7d1-c1f7-44cd-8fae-8ed5946f3cec
FreeSWITCH-Hostname: localhost.localdomain
FreeSWITCH-IPv4: 10.0.1.250
FreeSWITCH-IPv6: 127.0.0.1
Event-Date-Local: 2007-12-16%2022%3A27%3A42
Event-Date-GMT: Mon,%2017%20Dec%202007%2004%3A27%3A42%20GMT
Event-Date-timestamp: 1197865662745906
Event-Calling-File: switch_channel.c
Event-Calling-Function: switch_channel_dequeue_dtmf
Event-Calling-Line-Number: 269
```

### 消息

包含消息的组合文本，类似于电子邮件。

Content-Length: 699
Content-Type: text/event-plain

sip_mailbox: 1006
sip_auth_username: 1006
sip_auth_realm: 10.0.1.250
mailbox: 1006
user_name: 1006
domain_name: 10.0.1.250
accountcode: 1006
presence_id: 1006%4010.0.1.250
user_context: default
effective_caller_id_name: 分机%201006
effective_caller_id_number: 1006
Event-Name: MESSAGE
Core-UUID: 2130a7d1-c1f7-44cd-8fae-8ed5946f3cec
FreeSWITCH-Hostname: localhost.localdomain
FreeSWITCH-IPv4: 10.0.1.250
FreeSWITCH-IPv6: 127.0.0.1
Event-Date-Local: 2007-12-16%2022%3A28%3A29
Event-Date-GMT: 星期一，2007年12月17日 04:28:29 GMT
Event-Date-timestamp: 1197865709262950
Event-Calling-File: sofia_reg.c
Event-Calling-Function: sofia_reg_handle_sip_i_register
Event-Calling-Line-Number: 636

### 在线状态

Content-Length: 559
Content-Type: text/event-plain

proto: sip
login: sip%3Amod_sofia%4010.0.1.250%3A5060
rpid: unknown
from: 1006%4010.0.1.250
status: 已注册
event_type: presence
Event-Name: PRESENCE_IN
Core-UUID: 2130a7d1-c1f7-44cd-8fae-8ed5946f3cec
FreeSWITCH-Hostname: localhost.localdomain
FreeSWITCH-IPv4: 10.0.1.250
FreeSWITCH-IPv6: 127.0.0.1
Event-Date-Local: 2007-12-16%2022%3A30%3A59
Event-Date-GMT: 星期一，2007年12月17日 04:30:59 GMT
Event-Date-timestamp: 1197865859556025
Event-Calling-File: sofia_reg.c
Event-Calling-Function: sofia_reg_handle_register
Event-Calling-Line-Number: 532

[在线状态事件示例](https://wiki.freeswitch.org/wiki/PRESENCE%5FIN%5Fevent%5Fexample "在线状态事件示例")

### 离线状态

### 询问在线状态

Content-Length: 613
Content-Type: text/event-plain

**proto**: sip
**login**: sip%3Amod_sofia%4010.0.1.250%3A5060
**from**: 1009%4010.0.1.250
**status**: Available
**event_type**: presence
**event_subtype**: probe
**proto-specific-event-name**: dialog
**Event-Name**: PRESENCE_PROBE
**Core-UUID**: 2130a7d1-c1f7-44cd-8fae-8ed5946f3cec
**FreeSWITCH-Hostname**: localhost.localdomain
**FreeSWITCH-IPv4**: 10.0.1.250
**FreeSWITCH-IPv6**: 127.0.0.1
**Event-Date-Local**: 2007-12-16%2022%3A31%3A16
**Event-Date-GMT**: Mon,%2017%20Dec%202007%2004%3A31%3A16%20GMT
**Event-Date-timestamp**: 1197865876565022
**Event-Calling-File**: sofia_presence.c
**Event-Calling-Function**: sofia_presence_sub_reg_callback
**Event-Calling-Line-Number**: 484

### 等待消息

包含特定协议的MWI数据。

sendevent MESSAGE_WAITING
MWI-Messages-Waiting: yes
MWI-Message-Account: jonas@gauffin.com
MWI-Voice-Message: 2/1 (1/1)

语音留言: 总新消息数 / 总保存消息数 (总新紧急消息数 / 总保存紧急消息数)

### 消息查询

内容长度: 470
内容类型: text/event-plain

消息帐户: sip%3A1006%4010.0.1.250
事件名称: MESSAGE_QUERY
核心UUID: 2130a7d1-c1f7-44cd-8fae-8ed5946f3cec
FreeSWITCH主机名: localhost.localdomain
FreeSWITCH-IPv4: 10.0.1.250
FreeSWITCH-IPv6: 127.0.0.1
事件本地日期: 2007-12-16%2022%3A29%3A59
事件GMT日期: Mon,%2017%20Dec%202007%2004%3A29%3A59%20GMT
事件时间戳: 1197865799573052
事件调用文件: sofia_reg.c
事件调用函数: sofia_reg_handle_register
事件调用行号: 603

### 鹰群

内容长度: 457
内容类型: text/event-plain

proto: sip
from: 1006%4010.0.1.250
Event-Name: ROSTER
Core-UUID: 2130a7d1-c1f7-44cd-8fae-8ed5946f3cec
FreeSWITCH-Hostname: localhost.localdomain
FreeSWITCH-IPv4: 10.0.1.250
FreeSWITCH-IPv6: 127.0.0.1
Event-Date-Local: 2007-12-16%2022%3A32%3A29
Event-Date-GMT: Mon,%2017%20Dec%202007%2004%3A32%3A29%20GMT
Event-Date-timestamp: 1197865949889095
Event-Calling-File: sofia_reg.c
Event-Calling-Function: sofia_reg_handle_register
Event-Calling-Line-Number: 585

### RECV_RTCP_MESSAGE

Content-Length: 711
Content-Type: text/event-plain

Event-Name: RECV_RTCP_MESSAGE
Core-UUID: f852daae-6da9-4979-8dc8-fa11651a7891
FreeSWITCH-Hostname: test
FreeSWITCH-IPv4: 1.2.3.4
FreeSWITCH-IPv6: ::1
Event-Date-Local: 2010-12-21%2014%3A22%3A02
Event-Date-GMT: Tue,%2021%20Dec%202010%2013%3A22%3A02%20GMT
Event-Date-Timestamp: 1292937722267655
Event-Calling-File: mod_sofia.c
Event-Calling-Function: sofia_read_frame
Event-Calling-Line-Number: 928
Unique-ID: 3c93d73c-586a-4ef8-8ca4-fb5b1ccc26b7
SSRC: bdf97c8c
NTP-Most-Significant-Word: 3501926523
NTP-Least-Significant-Word: 3607772280
RTP-Timestamp: 3882139760
Sender-Packet-Count: 1222
Octect-Packet-Count: 210184
Last-RTP-Timestamp: 3882139760
RTP-Rate: 8000
Capture-Time: 1292937722267748

### CODEC

### DETECTED_SPEECH

Expand source 

```xml
Speech-Type: detected-speech
Event-Name: DETECTED_SPEECH
Core-UUID: aac0f73e-b822-e54c-a02a-06a839ca3e5a
FreeSWITCH-Hostname: AMONROY
FreeSWITCH-IPv4: 192.168.1.220
FreeSWITCH-IPv6: ::1
Event-Date-Local: 2009-01-26 16:07:24
Event-Date-GMT: Mon, 26 Jan 2009 22:07:24 GMT
Event-Date-Timestamp: 1233007644906250
Event-Calling-File: switch_ivr_async.c
Event-Calling-Function: speech_thread
Event-Calling-Line-Number: 1758
Content-Length: 435

```Simplified Chinese


<result grammar="<request1@form-level.store>#nombres">
	<interpretation grammar="<request1@form-level.store>#nombres" confidence="0.494643">
		<instance confidence="0.494643">
			arturo monroy
		</instance>
		<input mode="speech" confidence="0.494643">
			<input confidence="0.313102">
				arturo
			</input>
			<input confidence="0.618854">
				monroy
			</input>
		</input>
	</interpretation>
</result>
```

### PRIVATE_COMMAND

### TRAP

一种可用于指示严重错误的通用事件

### ADD_SCHEDULE

使用sched\_\_api命令时生成的事件

事件名称：ADD_SCHEDULE
核心UUID：f3c23231-f251-49d8-bbf6-fe5c52af3762
FreeSWITCH主机名：fstest
FreeSWITCH交换机名称：fstest
FreeSWITCH IPv4地址：192.168.20.73
FreeSWITCH IPv6地址： %3A%3A1
本地事件日期：2013-04-12%2011%3A56%3A24
GMT事件日期：星期五，2013年4月12日，09%3A56%3A24%20GMT
事件时间戳：1365760584365548
调用文件：switch_scheduler.c
调用函数：switch_scheduler_add_task
调用行号：222
事件序列：2252
任务ID：4
任务描述：sched_api_function
任务组：none
任务运行时间：1365760589

### DEL_SCHEDULE

使用sched_del命令或定时任务完成时生成的事件

事件名称：DEL_SCHEDULE
核心UUID：f3c23231-f251-49d8-bbf6-fe5c52af3762
FreeSWITCH主机名：fstest
FreeSWITCH交换机名称：fstest
FreeSWITCH IPv4地址：192.168.20.73
FreeSWITCH IPv6地址： %3A%3A1
本地事件日期：2013-04-12%2011%3A56%3A29
GMT事件日期：星期五，2013年4月12日，09%3A56%3A29%20GMT
事件时间戳：1365760589045539
调用文件：switch_scheduler.c
调用函数：switch_scheduler_execute
调用行号：74
事件序列：2254
任务ID：4
任务描述：sched_api_function
任务组：none
任务运行时间：1365760589

### EXE_SCHEDULE
  
  
## 附件：

![](/images/icons/bullet_blue.gif) [CS\_ROUTING-CS\_EXECUTE\_channel-state-diff.html](/attachments/7143557/32178221.html) (text/html)  
![](/images/icons/bullet_blue.gif) [CS\_ROUTING-RINGING\_events-diff-before-and-after-transfer.html](/attachments/7143557/32178223.html) (text/html)  

## 评论:

| **BACKGROUND\_JOB** "服务器响应" 应更新: Content-Type: command/reply Reply-Text: +OK Job-UUID: e3054f48-151e-11dc-842a-d3a3942d3d63Job-UUID: e3054f48-151e-11dc-842a-d3a3942d3d63 添加 **Job-UUID** 行。![](/images/icons/contenttypes/comment_16.png) 由 livem 于 2016年7月20日22:55发布 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |